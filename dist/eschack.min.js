/*! eschack 2016-04-20 */

"use strict";function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;b.length>c;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.values||(Object.values=function(a){return Object.keys(a).map(function(b){return a[b]})}),function(a){var b="prod",c="eschack_save",d=document.getElementById("canvas-main"),e=document.getElementById("canvas-second"),f=1040,g=520;d.width=f,d.height=g,e.width=f,e.height=g;var h=d.getContext("2d"),i=e.getContext("2d");h.font="20px Consolas",h.textAlign="center";var j=0,k=function(){function a(b,c){_classCallCheck(this,a),this.x=b,this.y=c}return a.prototype.set=function(a){this.x=a[0],this.y=a[1]},a.prototype.moveBy=function(a){var b=a.get,c=b[0],d=b[1];this.x+=c,this.y+=d},a.distance=function(a,b){return new l(b.x-a.x,b.y-a.y)},a.equal=function(a,b){return a.x===b.x&&a.y===b.y},_createClass(a,[{key:"get",get:function(){return[this.x,this.y]}}]),a}(),l=function(){function a(b,c){_classCallCheck(this,a),this.u=isNaN(b)?Math.sign(10*Math.random()-5):b,this.v=isNaN(c)?Math.sign(10*Math.random()-5):c}return a.prototype.set=function(a){this.u=a[0],this.v=a[1]},a.prototype.reduce=function(){var a=this.get,b=Math.max.apply(null,a.map(Math.abs));this.set(a.map(function(a){return Math.round(a/b)}))},_createClass(a,[{key:"get",get:function(){return[this.u,this.v]}}]),a}(),m=function(){function a(b){_classCallCheck(this,a),this.position=b,this.contents=new Set}return a.prototype.add=function(a){if(!a instanceof p)throw new TypeError("Added object must be of type GameObject.");this.contents.add(a)},a.prototype.remove=function(a){this.contents.delete(a)},a.prototype.empty=function(){this.contents.clear()},a.prototype.toString=function(){return"Floor"},_createClass(a,[{key:"isEmpty",get:function(){return 0===this.contents.size}},{key:"top",get:function(){return this.contents.values().next().value}},{key:"get",get:function(){return Array.from(this.contents)}}]),a}(),n=function(){function a(b,c){var d=this;_classCallCheck(this,a);for(var e in c)this[e]=c[e];if(b)this.matrix=b,this.w=this.matrix[0].length,this.h=this.matrix.length;else{this.matrix=[];for(var f=0;this.h>f;f++){this.matrix[f]=[];for(var g=0;this.w>g;g++)this.matrix[f][g]=new m(new k(g,f))}}if(this.matrix.forEach(this.origin.x>=0?function(a,b){return d.matrix[b]=Array(d.origin.x).concat(d.matrix[b])}:function(a,b){for(var c=0;-d.origin.x>c;c++)d.matrix[b].shift()}),this.origin.y>=0)this.matrix=Array(this.origin.y).concat(this.matrix);else for(var h=0;-this.origin.y>h;h++)this.matrix.shift();this.baseColor=this.baseColor||"slategrey",this.tileSize=this.tileSize||25,this.spacing=this.spacing||1}return a.prototype.update=function(){var a=this;this.matrix.forEach(function(b){return b.forEach(function(b){if(b&&!b.isEmpty){var c=b.top;b.empty(),a.insert(c)}})})},a.prototype.insert=function(a){var b=a.position.get,c=b[0],d=b[1];this.has(a.position)&&this.matrix[d][c].add(a)},a.prototype.remove=function(a){var b=a.position.get,c=b[0],d=b[1];this.has(a.position)&&this.matrix[d][c].remove(a)},a.prototype.clear=function(){this.matrix.forEach(function(a){return a.forEach(function(a){return a.empty()})})},a.prototype.has=function(a){var b=a.get,c=b[0],d=b[1];return!!this.matrix[d]&&!!this.matrix[d][c]},a.prototype.get=function(a){var b=a.get,c=b[0],d=b[1];return this.has(a)?this.matrix[d][c]:void 0},a.prototype.find=function(){this.matrix.forEach(function(a){return a.find()})},a.prototype.draw=function(){var a=this;this.matrix.forEach(function(b){return b.forEach(function(b){if(b){var c=b.position.get,d=c[0],e=c[1];b.isEmpty?(h.fillStyle=a.baseColor,h.fillRect(d*(a.tileSize+a.spacing),e*(a.tileSize+a.spacing),a.tileSize,a.tileSize)):(h.fillStyle=b.top.bgColor,h.fillRect(d*(a.tileSize+a.spacing),e*(a.tileSize+a.spacing),a.tileSize,a.tileSize),h.fillStyle=b.top.color,h.fillText(b.top.glyph,d*(a.tileSize+a.spacing)+a.tileSize/2,e*(a.tileSize+a.spacing)+a.tileSize/1.5))}})})},_createClass(a,[{key:"bounds",get:function(){return{x:this.origin.x*(this.tileSize+this.spacing),y:this.origin.y*(this.tileSize+this.spacing),w:this.w*(this.tileSize+this.spacing)-this.spacing,h:this.h*(this.tileSize+this.spacing)-this.spacing}}}]),a}(),o=function D(a){_classCallCheck(this,D),this.damage=a||1},p=function(){function a(b){if(_classCallCheck(this,a),this.constructor===a)throw new TypeError("GameObject is abstract");this.id=j,j+=1,this.position=b,this.bgColor="magenta",this.glyph="⚠",this.color="black",this.flavorName="OBJ",this.type=this.constructor.name}return a.prototype.update=function(){},a.from=function(a){var b=new this(new k(a.position.x,a.position.y),a.stats),c=["lifebar","position"];for(var d in a)c.includes(d)||(b[d]=a[d]);return b},a.prototype.toString=function(){return this.type},_createClass(a,[{key:"isAlive",get:function(){return this.hasOwnProperty("stats")?this.stats.HP>0:!0}}]),a}(),Wall=function(a){function Wall(b){_classCallCheck(this,Wall);var c=_possibleConstructorReturn(this,a.call(this,b));return c.bgColor="hsl(0,0%,15%)",c.glyph="▉",c.color="hsl(0,0%,25%)",c.flavorName="wall",c}return _inherits(Wall,a),Wall.prototype.update=function(){return!0},Wall}(p),q=function(a){function b(c,d){_classCallCheck(this,b);var e=_possibleConstructorReturn(this,a.call(this,c));return e.actions=[],e.stats=d||{maxHP:3,HP:3,viewDistance:5},e.weapon=new o,e.flavorName="creature",e.flavor="It is mundane.",e}return _inherits(b,a),b.prototype.update=function(){var a=this;return this.actions.forEach(function(b){try{var c=b.find(function(b){var c=b();return c.try(a)});c=c(),c.do(a)}catch(d){}}),this.actions=[],this.stats.HP>0},b.prototype.takeDamage=function(a,b){return this.stats.HP-=a,this.lifebar&&this.lifebar.set(this.stats.HP),0>=this.stats.HP?(this.die(b),!0):!1},b.prototype.die=function(a){a.log(this.flavorName+" died","death"),this.lifebar.remove()},b.prototype.toString=function(){return this.type+"<br>"+this.stats.HP+" HP<br>"+this.flavor+"<br>"+this.weapon.damage+" ATT"},b}(p),Player=function(a){function Player(b,c){_classCallCheck(this,Player);var d=_possibleConstructorReturn(this,a.call(this,b,c));return d.actions=[],d.bgColor="white",d.glyph="@",d.color="black",d.stats=c||{maxHP:50,HP:50,viewDistance:8},d.lifebar=new v(d.id,"Hero",document.getElementById("info-container-player"),d.stats.maxHP,d.stats.HP),d.flavorName="you",d.flavor="Hi mom!",d}return _inherits(Player,a),Player}(q),Enemy=function(a){function Enemy(b,c){_classCallCheck(this,Enemy);var d=_possibleConstructorReturn(this,a.call(this,b,c));return d.actions=[],d.bgColor="hsl(30, 30%, 45%)",d.glyph="E",d.color="white",d.stats=c||{maxHP:3,HP:3,viewDistance:7},d.lifebar=new v(d.id,"Enemy",document.getElementById("info-container-other-life"),d.stats.maxHP,d.stats.HP),d.flavorName="the enemy",d.flavor="It has a fearsome visage.",d}return _inherits(Enemy,a),Enemy.prototype.toString=function(){return this.type+"<br>"+this.stats.HP+" HP<br>"+this.flavor+"<br>"+this.weapon.damage+" ATT<br>"+(this.noticed?"It has noticed you.":"It has not noticed you.")},Enemy}(q),r=function(){function a(b,c){if(_classCallCheck(this,a),this.constructor===p)throw new TypeError("Action is abstract");this.context=b,this.logger=c}return a.prototype.try=function(){},a.prototype.do=function(){},a}(),s=function(a){function b(c,d){return _classCallCheck(this,b),_possibleConstructorReturn(this,a.call(this,c,d))}return _inherits(b,a),b.prototype.try=function(){return!0},b.prototype.do=function(){return null},b}(r),t=function(a){function b(c,d,e){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,a.call(this,c,d));return f.movement=e,f}return _inherits(b,a),b.prototype.try=function(a){var b=new(Function.prototype.bind.apply(k,[null].concat(a.position.get)));return b.moveBy(this.movement),this.context.get(b)&&this.context.get(b).isEmpty},b.prototype.do=function(a){a.position.moveBy(this.movement),this.context.update()},b}(r),u=function(a){function b(c,d,e){_classCallCheck(this,b);var f=_possibleConstructorReturn(this,a.call(this,c,d));return f.direction=e,f}return _inherits(b,a),b.prototype.try=function(a){var b=new(Function.prototype.bind.apply(k,[null].concat(a.position.get)));return b.moveBy(this.direction),this.context.get(b)&&this.context.get(b).top instanceof q},b.prototype.do=function(a){var b=new(Function.prototype.bind.apply(k,[null].concat(a.position.get)));b.moveBy(this.direction),b=this.context.get(b),this.logger.log(a.flavorName+" hit "+b.top.flavorName+" for "+a.weapon.damage+" damage",a.constructor===Player?"hit":"damage");var c=b.top.takeDamage(a.weapon.damage,this.logger);c&&this.context.remove(b.top),this.context.update()},b}(r),v=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.id=b,this.name=c,this.max=e,this.value=f||e,this.container=d;var g=document.createElement("label");g.setAttribute("for","bar-lifebar-"+this.name+"-"+this.id),g.innerHTML=this.name,this.label=g;var h=document.createElement("div");h.className="bar bar-lifebar",h.id="bar-lifebar-"+this.name+"-"+this.id,this.bar=h,this.set(),this.container.appendChild(g),this.container.appendChild(this.bar)}return a.prototype.set=function(a){isNaN(a)||(this.value=a),this.bar.setAttribute("data-content",this.value+"/"+this.max);var b="bar-size-"+Math.max(Math.floor(this.value/this.max*100),0);this.bar.className.match(/size/)?this.bar.className=this.bar.className.replace(/bar-size-[0-9]{1,3}/,b):this.bar.classList.add(b)},a.prototype.setStyle=function(a){var b=this,c={hilight:"hilighted","default":"default"};a=c[a],a&&(Object.values(c).filter(function(b){return b!==a}).forEach(function(a){b.bar.classList.remove(a),b.label.classList.remove(a)}),this.bar.classList.add(a),this.label.classList.add(a))},a.prototype.remove=function(){this.bar.remove(),this.label.remove()},a.prototype.hide=function(){this.bar.style.display="none",this.label.style.display="none"},a.prototype.show=function(){this.bar.style.display="",this.label.style.display=""},a}(),w=function(){function a(){_classCallCheck(this,a),this.keyCases={w:"n",87:"n",104:"n",a:"w",65:"w",100:"w",s:"s",83:"s",98:"s",d:"e",68:"e",102:"e",105:"ne",99:"se",97:"sw",103:"nw",101:"c"},this.actionMap={n:function(){return new l(0,-1)},w:function(){return new l(-1,0)},s:function(){return new l(0,1)},e:function(){return new l(1,0)},ne:function(){return new l(1,-1)},se:function(){return new l(1,1)},sw:function(){return new l(-1,1)},nw:function(){return new l(-1,-1)},c:null}}return a.prototype.get=function(a){return this.actionMap[this.keyCases[a]]},a}(),x=function(){function a(b,c){_classCallCheck(this,a),this.board=b,this.logger=c,this.proposalMap={},this.proposalMap[l]=[t,u,s]}return a.prototype.think=function(a,b){var c=this;if(a instanceof Enemy){var d=function(){var d=c.getFov(a);a.target=d.get(b.position);var e=null;if(a.target){if(k.equal(a.position,a.target.position))return a.target=void 0,{v:void 0};var f=k.distance(a.position,a.target.position);f.reduce(),e=f,a.noticed||c.logger.log(a.flavorName+" noticed "+b.flavorName),a.noticed=!0}else e=new l,a.noticed=!1;var g=c.proposalMap[e.constructor];if(g){var h=g.map(function(a){return function(){return new a(c.board,c.logger,e)}});a.actions.push(h)}}();if("object"===(void 0===d?"undefined":_typeof(d)))return d.v}},a.prototype.getFov=function(a){for(var b=a.position.get,c=b[0],d=b[1],e=a.stats.viewDistance,f={ne:[],se:[],sw:[],nw:[]},g=0;e>g;g++)for(var h=0;e>h;h++)f.ne[g]||(f.ne[g]=[],f.se[g]=[],f.sw[g]=[],f.nw[g]=[]),f.ne[g][h]=this.board.get(new k(c+h,d-e+g+1)),f.se[g][h]=this.board.get(new k(c+h,d+g)),f.sw[g][h]=this.board.get(new k(c-e+h+1,d+g)),f.nw[g][h]=this.board.get(new k(c-e+h+1,d-e+g+1));return f.ne=y.rotate(y.beamcast(y.rotate(f.ne,90)),-90),f.se=y.beamcast(f.se),f.sw=y.rotate(y.beamcast(y.rotate(f.sw,-90)),90),f.nw=y.rotate(y.beamcast(y.rotate(f.nw,180)),-180),new n(y.mergeQuarters(f),{origin:new k(c-e+1,d-e+1),baseColor:"hsla(244,3%,55%,1)",tileSize:25,spacing:1})},a.prototype.delegateAction=function(a,b){var c=this;if(b&&"function"==typeof b){b=b();var d=this.proposalMap[b.constructor];if(d){var e=d.map(function(a){return function(){return new a(c.board,c.logger,b)}});return a.actions.push(e),!0}}else if(null===b)return a.actions.push([function(){return new s(null,c.logger)}]),!0;return!1},a}(),y=function(){function b(){_classCallCheck(this,b),this.exports={instance:C,Creature:q,Player:Player,GameObject:p,Point:k,Vector:l,ActionManager:x,TileGroup:n,Utils:b,Tile:m,Wall:Wall}}return b.rotate=function(a,c){return 90===c?b.transpose(a.reverse()):-90===c?b.transpose(a).reverse():180===c||-180===c?b.transpose(b.transpose(a).reverse()).reverse():a},b.transpose=function(a){var b=a.length?a.length:0,c=a[0]instanceof Array?a[0].length:0;if(0===c||0===b)return[];var d,e,f=[];for(d=0;c>d;d++)for(f[d]=[],e=0;b>e;e++)f[d][e]=a[e][d];return f},b.beamcast=function(a){for(var b=[],c=0;a.length>c;c++)b[c]=Array.from(Array(a.length));b[0][0]=a[0][0];for(var d=0;a[d]&&a[d][0]&&(b[d][0]=a[d][0],!(a[d][0].top&&a[d][0].top instanceof Wall));)d++;for(var e=0;a[0]&&a[0][e]&&(b[0][e]=a[0][e],!(a[0][e].top^a[0][e].top instanceof Wall));)e++;for(var f=1,g=31;g>=f;f++)for(var h=f,i=0,j=g,k=0;j>=i;k++){var l=h>>5,m=k-l,n=g+1-(h&g),o=!1;if(n>i&&(a[m]&&a[m][l]?(b[m][l]=a[m][l],a[m][l].top&&a[m][l].top instanceof Wall&&(i=n,o=!0)):(i=n,o=!0)),n>j&&(a[m]&&a[m][l]?(b[m][l]=a[m][l],a[m][l].top&&a[m][l].top instanceof Wall&&(j=n,o=!0)):(j=n,o=!0)),h+=f,o)break}return b},b.mergeQuarters=function(a){var b=a.nw.map(function(b,c){return b.pop(),b.concat(a.ne[c])}),c=a.sw.map(function(b,c){return b.pop(),b.concat(a.se[c])});return b.pop(),b.concat(c)},b.saveGame=function(a){var b={};b.board=a.board,b.player=a.player,b.objs=a.objs,b=LZString.compress(JSON.stringify(b)),localStorage.setItem(c,b)},b.loadGame=function(){var a=JSON.parse(LZString.decompress(localStorage.getItem(c))||null);if(!a)return null;var b=function(){var b={Wall:Wall,Creature:q,Enemy:Enemy,Player:Player},c=[];c.push(new n(null,{origin:new k(a.board.origin.x,a.board.origin.y),baseColor:a.board.baseColor,tileSize:a.board.tileSize,spacing:a.board.spacing,w:a.board.w,h:a.board.h}));var d=[];return a.objs.forEach(function(a){a&&b[a.type]&&(d[a.id]=b[a.type].from(a))}),c.push(d),{v:new(Function.prototype.bind.apply(B,[null].concat(c)))}}();return"object"===(void 0===b?"undefined":_typeof(b))?b.v:void 0},b.deleteSave=function(){localStorage.removeItem(c)},b.screenToGame=function(a,b,c){return new k(Math.floor(a.x/(b+c)),Math.floor(a.y/(b+c)))},b.gameToScreen=function(){},b.exportObjs=function(b){for(var c in b)a[c]=b[c]},b}(),z=function(){function a(b,c){_classCallCheck(this,a),this.logbox=b,this.rowCount=c,this.rows=[],this.messages=[];for(var d=0;this.rowCount>d;d++){var e=document.createElement("div");e.className="logbox-row",e.id="logbox-row-"+(d+1),this.logbox.appendChild(e),this.rows.push(e)}}return a.prototype.log=function(a){var b=this,c=1>=arguments.length||void 0===arguments[1]?"default":arguments[1];a=a.charAt(0).toUpperCase()+a.slice(1);var d=document.createElement("span");d.className="logmsg logmsg-"+c,d.innerHTML=a,this.messages.push(d);var e=this.rows.find(function(a){return 0===a.children.length});e?e.appendChild(d):(this.rows[0].children[0].remove(),this.rows.forEach(function(a,c){a.appendChild(b.messages[b.messages.length-(b.rowCount-c)])}))},a}(),A=function(){function a(b){_classCallCheck(this,a),this.board=b;var c=document.createElement("div");c.id="cursor",c.style.width=this.board.tileSize+"px",c.style.height=this.board.tileSize+"px",this.cursor=c,document.body.appendChild(this.cursor)}return a.prototype.setCursorToScreen=function(a,b){a=Math.floor(a/(this.board.tileSize+this.board.spacing)),b=Math.floor(b/(this.board.tileSize+this.board.spacing)),this.cursor.style.top=b*(this.board.tileSize+this.board.spacing)+"px",this.cursor.style.left=a*(this.board.tileSize+this.board.spacing)+"px"},a.prototype.setCursorToGame=function(a,b){this.cursor.style.top=b*(this.board.tileSize+this.board.spacing)+"px",this.cursor.style.left=a*(this.board.tileSize+this.board.spacing)+"px"},a.prototype.get=function(a,b){return a=Math.floor(a/(this.board.tileSize+this.board.spacing)),b=Math.floor(b/(this.board.tileSize+this.board.spacing)),this.board.get(new k(a,b))},a}(),B=function(){function a(b,c){var d=this;_classCallCheck(this,a),this.logger=new z(document.getElementById("logbox"),10),this.time=0,this.board=b,this.player=c[0],this.objs=[],c.forEach(function(a){return d.objs[a.id]=a}),this.logic=new x(this.board,this.logger),this.keyHandler=new w,document.addEventListener("keydown",function(a){d.logic.delegateAction(d.player,d.keyHandler.get(a.keyCode))&&d.update()}),this.miscOtherInfoContainer=document.getElementById("info-container-other-misc"),this.mouseHandler=new A(this.board),document.addEventListener("mousemove",function(a){var b=d.board.bounds;if(a.pageX>=b.x&&b.x+b.w>=a.pageX&&a.pageY>=b.y&&b.y+b.h>=a.pageY){d.mouseHandler.setCursorToScreen(a.pageX,a.pageY);var c=d.logic.getFov(d.player),e=y.screenToGame(new k(a.pageX,a.pageY),d.board.tileSize,d.board.spacing);if(c.has(e)){var f=d.mouseHandler.get(a.pageX,a.pageY);f&&f.top?(d.objs.forEach(function(a){a.lifebar&&a.lifebar.setStyle("default")}),d.miscOtherInfoContainer.innerHTML=f.top,f.top instanceof q&&f.top.lifebar.setStyle("hilight")):d.miscOtherInfoContainer.innerHTML=f}else d.miscOtherInfoContainer.innerHTML="You can't see that"}else if(a.target.classList.contains("bar-lifebar")){d.objs.forEach(function(a){a.lifebar&&a.lifebar.setStyle("default")});var g=a.target.id.match(/[0-9]+$/),h=d.objs[+g];h&&(d.mouseHandler.setCursorToGame(h.position.x,h.position.y),d.miscOtherInfoContainer.innerHTML=h,h.lifebar.setStyle("hilight"))}})}return a.prototype.update=function(){var a=this;this.objs.forEach(function(b){b.isAlive?(a.logic.think(b,a.player),b.update(a.logger)||(a.board.remove(b),delete a.objs[b.id])):(a.board.remove(b),delete a.objs[b.id])});var b=this.logic.getFov(this.player);this.logic.think(this.player),h.clearRect(0,0,f,g),b.draw(),i.drawImage(d,0,0)},a.prototype.start=function(){var a=this;document.getElementById("button-save").addEventListener("click",function(b){b.stopPropagation(),y.saveGame(a)}),document.getElementById("button-delete").addEventListener("click",function(a){a.stopPropagation(),y.deleteSave()}),this.logger.log("Hello and welcome","hilight"),this.objs.forEach(function(b){b&&a.board.insert(b)});var b=this.logic.getFov(this.player);this.logic.think(this.player),b.draw(),document.getElementById("loader").remove()},a}(),C=y.loadGame()||new B(new n(null,{origin:new k(0,0),baseColor:"slategrey",tileSize:25,spacing:1,w:40,h:20}),[new Player(new k(18,9)),new Wall(new k(3,0)),new Wall(new k(7,0)),new Wall(new k(8,0)),new Wall(new k(9,0)),new Wall(new k(10,0)),new Wall(new k(11,0)),new Wall(new k(12,0)),new Wall(new k(13,0)),new Wall(new k(14,0)),new Wall(new k(15,0)),new Wall(new k(16,0)),new Wall(new k(17,0)),new Enemy(new k(18,0)),new Wall(new k(22,0)),new Wall(new k(23,0)),new Wall(new k(27,0)),new Wall(new k(28,0)),new Wall(new k(29,0)),new Wall(new k(30,0)),new Wall(new k(31,0)),new Wall(new k(32,0)),new Wall(new k(33,0)),new Wall(new k(34,0)),new Wall(new k(35,0)),new Enemy(new k(39,0)),new Wall(new k(1,1)),new Wall(new k(5,1)),new Wall(new k(7,1)),new Wall(new k(9,1)),new Wall(new k(14,1)),new Wall(new k(15,1)),new Wall(new k(16,1)),new Wall(new k(17,1)),new Wall(new k(19,1)),new Wall(new k(20,1)),new Wall(new k(22,1)),new Wall(new k(23,1)),new Wall(new k(25,1)),new Wall(new k(32,1)),new Wall(new k(33,1)),new Enemy(new k(1,2)),new Wall(new k(3,2)),new Enemy(new k(5,2)),new Wall(new k(7,2)),new Wall(new k(11,2)),new Wall(new k(12,2)),new Enemy(new k(24,2)),new Wall(new k(25,2)),new Wall(new k(27,2)),new Wall(new k(28,2)),new Wall(new k(30,2)),new Wall(new k(35,2)),new Enemy(new k(39,2)),new Wall(new k(1,3)),new Wall(new k(5,3)),new Wall(new k(7,3)),new Wall(new k(9,3)),new Wall(new k(12,3)),new Wall(new k(13,3)),new Wall(new k(14,3)),new Wall(new k(15,3)),new Wall(new k(16,3)),new Wall(new k(17,3)),new Wall(new k(18,3)),new Wall(new k(19,3)),new Wall(new k(20,3)),new Wall(new k(21,3)),new Wall(new k(22,3)),new Wall(new k(23,3)),new Wall(new k(24,3)),new Wall(new k(25,3)),new Wall(new k(28,3)),new Wall(new k(30,3)),new Wall(new k(31,3)),new Wall(new k(32,3)),new Wall(new k(33,3)),new Wall(new k(34,3)),new Wall(new k(35,3)),new Wall(new k(36,3)),new Wall(new k(37,3)),new Wall(new k(38,3)),new Wall(new k(39,3)),new Wall(new k(3,4)),new Wall(new k(7,4)),new Wall(new k(9,4)),new Wall(new k(10,4)),new Wall(new k(12,4)),new Wall(new k(13,4)),new Wall(new k(17,4)),new Enemy(new k(22,4)),new Wall(new k(24,4)),new Wall(new k(25,4)),new Wall(new k(26,4)),new Wall(new k(28,4)),new Wall(new k(33,4)),new Wall(new k(1,5)),new Wall(new k(5,5)),new Wall(new k(13,5)),new Wall(new k(15,5)),new Wall(new k(17,5)),new Wall(new k(19,5)),new Wall(new k(21,5)),new Wall(new k(22,5)),new Wall(new k(24,5)),new Wall(new k(25,5)),new Wall(new k(30,5)),new Wall(new k(31,5)),new Wall(new k(33,5)),new Wall(new k(35,5)),new Wall(new k(37,5)),new Wall(new k(38,5)),new Wall(new k(7,6)),new Wall(new k(8,6)),new Wall(new k(9,6)),new Wall(new k(10,6)),new Wall(new k(11,6)),new Wall(new k(13,6)),new Wall(new k(15,6)),new Wall(new k(17,6)),new Wall(new k(19,6)),new Wall(new k(21,6)),new Wall(new k(22,6)),new Wall(new k(24,6)),new Wall(new k(27,6)),new Wall(new k(28,6)),new Wall(new k(33,6)),new Wall(new k(38,6)),new Wall(new k(0,7)),new Wall(new k(1,7)),new Wall(new k(2,7)),new Wall(new k(3,7)),new Wall(new k(4,7)),new Enemy(new k(14,7)),new Wall(new k(15,7)),new Wall(new k(21,7)),new Wall(new k(22,7)),new Wall(new k(26,7)),new Wall(new k(27,7)),new Wall(new k(28,7)),new Wall(new k(29,7)),new Wall(new k(30,7)),new Wall(new k(31,7)),new Wall(new k(33,7)),new Wall(new k(34,7)),new Wall(new k(35,7)),new Wall(new k(36,7)),new Wall(new k(38,7)),new Wall(new k(4,8)),new Wall(new k(5,8)),new Wall(new k(7,8)),new Wall(new k(8,8)),new Wall(new k(9,8)),new Wall(new k(11,8)),new Wall(new k(12,8)),new Wall(new k(13,8)),new Wall(new k(14,8)),new Wall(new k(15,8)),new Wall(new k(21,8)),new Wall(new k(22,8)),new Wall(new k(24,8)),new Wall(new k(25,8)),new Wall(new k(26,8)),new Wall(new k(27,8)),new Wall(new k(28,8)),new Wall(new k(29,8)),new Wall(new k(30,8)),new Wall(new k(31,8)),new Enemy(new k(33,8)),new Wall(new k(36,8)),new Wall(new k(38,8)),new Enemy(new k(2,9)),new Wall(new k(5,9)),new Wall(new k(31,9)),new Wall(new k(33,9)),new Wall(new k(34,9)),new Wall(new k(36,9)),new Wall(new k(38,9)),new Wall(new k(4,10)),new Wall(new k(5,10)),new Wall(new k(7,10)),new Wall(new k(8,10)),new Wall(new k(9,10)),new Wall(new k(10,10)),new Wall(new k(11,10)),new Wall(new k(12,10)),new Wall(new k(13,10)),new Wall(new k(15,10)),new Wall(new k(21,10)),new Wall(new k(22,10)),new Wall(new k(24,10)),new Wall(new k(26,10)),new Wall(new k(27,10)),new Wall(new k(29,10)),new Wall(new k(33,10)),new Wall(new k(34,10)),new Wall(new k(36,10)),new Wall(new k(38,10)),new Wall(new k(1,11)),new Wall(new k(2,11)),new Wall(new k(3,11)),new Wall(new k(4,11)),new Wall(new k(7,11)),new Enemy(new k(10,11)),new Wall(new k(11,11)),new Wall(new k(12,11)),new Wall(new k(15,11)),new Wall(new k(21,11)),new Wall(new k(24,11)),new Wall(new k(26,11)),new Wall(new k(27,11)),new Wall(new k(29,11)),new Wall(new k(31,11)),new Wall(new k(32,11)),new Wall(new k(33,11)),new Wall(new k(34,11)),new Wall(new k(38,11)),new Wall(new k(1,12)),new Wall(new k(6,12)),new Wall(new k(7,12)),new Wall(new k(8,12)),new Wall(new k(10,12)),new Wall(new k(11,12)),new Wall(new k(14,12)),new Wall(new k(15,12)),new Wall(new k(16,12)),new Wall(new k(17,12)),new Wall(new k(19,12)),new Wall(new k(20,12)),new Wall(new k(21,12)),new Wall(new k(23,12)),new Wall(new k(24,12)),new Wall(new k(26,12)),new Wall(new k(29,12)),new Wall(new k(36,12)),new Wall(new k(37,12)),new Wall(new k(38,12)),new Wall(new k(1,13)),new Wall(new k(2,13)),new Wall(new k(3,13)),new Wall(new k(4,13)),new Wall(new k(5,13)),new Wall(new k(6,13)),new Wall(new k(13,13)),new Wall(new k(14,13)),new Wall(new k(15,13)),new Wall(new k(16,13)),new Wall(new k(17,13)),new Wall(new k(19,13)),new Wall(new k(23,13)),new Wall(new k(24,13)),new Enemy(new k(25,13)),new Wall(new k(28,13)),new Wall(new k(29,13)),new Wall(new k(31,13)),new Wall(new k(32,13)),new Wall(new k(33,13)),new Wall(new k(34,13)),new Wall(new k(36,13)),new Wall(new k(2,14)),new Wall(new k(3,14)),new Wall(new k(5,14)),new Wall(new k(6,14)),new Wall(new k(8,14)),new Wall(new k(10,14)),new Wall(new k(11,14)),new Wall(new k(13,14)),new Wall(new k(14,14)),new Wall(new k(15,14)),new Wall(new k(16,14)),new Wall(new k(19,14)),new Wall(new k(21,14)),new Wall(new k(22,14)),new Wall(new k(23,14)),new Wall(new k(24,14)),new Wall(new k(25,14)),new Wall(new k(27,14)),new Wall(new k(28,14)),new Wall(new k(29,14)),new Wall(new k(31,14)),new Wall(new k(32,14)),new Wall(new k(33,14)),new Wall(new k(34,14)),new Wall(new k(38,14)),new Wall(new k(0,15)),new Wall(new k(3,15)),new Wall(new k(10,15)),new Wall(new k(11,15)),new Wall(new k(13,15)),new Wall(new k(14,15)),new Wall(new k(15,15)),new Wall(new k(18,15)),new Wall(new k(19,15)),new Wall(new k(27,15)),new Wall(new k(34,15)),new Wall(new k(36,15)),new Wall(new k(37,15)),new Wall(new k(38,15)),new Wall(new k(0,16)),new Wall(new k(1,16)),new Wall(new k(3,16)),new Wall(new k(5,16)),new Wall(new k(6,16)),new Wall(new k(8,16)),new Wall(new k(10,16)),new Wall(new k(11,16)),new Wall(new k(17,16)),new Wall(new k(18,16)),new Wall(new k(19,16)),new Wall(new k(21,16)),new Wall(new k(22,16)),new Wall(new k(23,16)),new Wall(new k(24,16)),new Wall(new k(25,16)),new Wall(new k(29,16)),new Wall(new k(30,16)),new Wall(new k(31,16)),new Wall(new k(32,16)),new Wall(new k(34,16)),new Wall(new k(36,16)),new Wall(new k(37,16)),new Wall(new k(38,16)),new Wall(new k(3,17)),new Enemy(new k(4,17)),new Wall(new k(8,17)),new Wall(new k(10,17)),new Wall(new k(11,17)),new Wall(new k(13,17)),new Wall(new k(14,17)),new Wall(new k(15,17)),new Wall(new k(16,17)),new Wall(new k(17,17)),new Wall(new k(18,17)),new Wall(new k(19,17)),new Wall(new k(21,17)),new Wall(new k(25,17)),new Wall(new k(27,17)),new Wall(new k(28,17)),new Wall(new k(29,17)),new Wall(new k(32,17)),new Wall(new k(34,17)),new Enemy(new k(39,17)),new Wall(new k(1,18)),new Wall(new k(2,18)),new Wall(new k(3,18)),new Wall(new k(5,18)),new Wall(new k(6,18)),new Wall(new k(8,18)),new Enemy(new k(9,18)),new Wall(new k(10,18)),new Wall(new k(11,18)),new Wall(new k(18,18)),new Wall(new k(19,18)),new Wall(new k(21,18)),new Wall(new k(23,18)),new Wall(new k(27,18)),new Wall(new k(29,18)),new Wall(new k(31,18)),new Wall(new k(32,18)),new Wall(new k(34,18)),new Wall(new k(5,19)),new Wall(new k(6,19)),new Wall(new k(8,19)),new Wall(new k(13,19)),new Wall(new k(14,19)),new Wall(new k(15,19)),new Wall(new k(16,19)),new Enemy(new k(19,19)),new Wall(new k(23,19)),new Wall(new k(24,19)),new Wall(new k(25,19)),new Wall(new k(26,19)),new Wall(new k(27,19)),new Enemy(new k(29,19)),new Wall(new k(34,19)),new Enemy(new k(36,19))]);if("dev"===b)y.exportObjs(y.exports);else if("prod"!==b)throw new TypeError("Invalid environment");C.start()}(window);
//# sourceMappingURL=eschack.min.js.map